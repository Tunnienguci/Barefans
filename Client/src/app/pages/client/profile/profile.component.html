<app-loading [isLoading]="isLoading"></app-loading>
<div class="profile">
  <div class="main-info">
    <div class="cover-img">
      <img src="../../../../assets/images/bg.webp" alt="cover image" />
    </div>
    <div class="infomation">
      <div class="avatar">
        <img [src]="currentUser.avatar" alt="avatar" />
        <div class="name mx-3">
          <h2>{{ currentUser.fullName }}</h2>
          <a class="mb-0 text-decoration-none" *ngIf="currentUser.account"
            >@{{ currentUser.account.username }}</a
          >
        </div>
      </div>

      <div class="action" *ngIf="!permission">
        <ng-container *ngIf="findRequest()">
          <button class="btn btn-secondary mx-3">
            <i class="fa-regular fa-square-plus me-2"></i>
            Requested
          </button>
        </ng-container>
        <ng-container *ngIf="!findRequest()">
          <button class="btn btn-primary mx-3" (click)="followUser()">
            <i class="fa-regular fa-square-plus me-2"></i>
            Follow
          </button>
        </ng-container>

        <button class="btn btn-primary">
          <i class="fa-regular fa-message me-2"></i>
          Message
        </button>
      </div>
    </div>

    <div class="nav nav-menu">
      <div class="nav-item">
        <a
          class="nav-link"
          [class.active]="currentTab == ''"
          (click)="changeTab('')"
          >Timeline</a
        >
      </div>
      <div class="nav-item">
        <a
          class="nav-link"
          [class.active]="currentTab == 'about'"
          (click)="changeTab('about')"
          >About</a
        >
      </div>
      <div class="nav-item">
        <a
          class="nav-link"
          [class.active]="currentTab == 'friends'"
          (click)="changeTab('friends')"
          >Friends</a
        >
      </div>
      <div class="nav-item">
        <a
          class="nav-link"
          [class.active]="currentTab == 'photos'"
          (click)="changeTab('photos')"
          >Photos</a
        >
      </div>
      <div
        class="nav-item"
        [class.active]="currentTab == 'video'"
        (click)="changeTab('video')"
      >
        <a class="nav-link">Videos</a>
      </div>
      <div
        class="nav-item"
        [class.active]="currentTab == 'timeline'"
        (click)="changeTab('timeline')"
      >
        <a class="nav-link">More</a>
      </div>
    </div>
  </div>
  <div class="body-info">
    <ng-container *ngIf="currentTab === ''">
      <app-timeline
        [currentUser]="currentUser"
        [authUser]="authUser"
        [posts]="posts"
        [permission]="permission"
      ></app-timeline>
    </ng-container>
    <ng-container *ngIf="currentTab === 'about'">
      <app-about></app-about>
    </ng-container>
    <ng-container *ngIf="currentTab === 'friends'">
      <app-friend></app-friend>
    </ng-container>
    <ng-container *ngIf="currentTab === 'photos'">
      <app-photo [albums]="currentUser.albums"></app-photo>
    </ng-container>
    <ng-container *ngIf="currentTab === 'videos'">
      <app-video></app-video>
    </ng-container>
  </div>
</div>
